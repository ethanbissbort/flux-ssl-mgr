<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificate Info - Flux SSL Manager</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üîê Flux SSL Manager</h1>
            <p class="subtitle">Certificate Information Viewer</p>
            <nav>
                <a href="/">Home</a>
                <a href="/csr-upload">Upload CSR</a>
                <a href="/cert-generate">Generate Certificate</a>
                <a href="/cert-info" class="active">Certificate Info</a>
            </nav>
        </header>

        <main>
            <div class="form-container">
                <h2>View Certificate Information</h2>
                <p class="help-text">Upload a certificate file to view detailed information including validity, extensions, and fingerprints.</p>

                <form id="cert-info-form" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="cert-file">Certificate File</label>
                        <div class="file-upload-area" id="cert-drop-zone">
                            <input type="file" id="cert-file" name="cert_file" accept=".pem,.crt,.cer,.der" required>
                            <div class="upload-placeholder">
                                <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                    <line x1="16" y1="13" x2="8" y2="13"></line>
                                    <line x1="16" y1="17" x2="8" y2="17"></line>
                                    <polyline points="10 9 9 9 8 9"></polyline>
                                </svg>
                                <p><strong>Drop certificate file here</strong> or click to browse</p>
                                <p class="file-requirements">Supported formats: .pem, .crt, .cer, .der (max 5MB)</p>
                            </div>
                            <div class="file-info" id="file-info" style="display: none;">
                                <p class="file-name"></p>
                                <p class="file-size"></p>
                                <button type="button" class="btn-remove" id="remove-file">Remove</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="submit-btn">
                            <span class="btn-text">View Certificate Info</span>
                            <span class="spinner" style="display: none;"></span>
                        </button>
                        <a href="/" class="btn btn-secondary">Cancel</a>
                    </div>
                </form>

                <div id="result-container" style="display: none;">
                    <div class="alert alert-info">
                        <h3>üìÑ Certificate Information</h3>
                    </div>

                    <div class="cert-status" id="cert-status"></div>

                    <div class="cert-info-grid">
                        <div class="info-section">
                            <h3>Basic Information</h3>
                            <dl>
                                <dt>Version:</dt>
                                <dd id="cert-version"></dd>

                                <dt>Serial Number:</dt>
                                <dd id="cert-serial" class="mono"></dd>

                                <dt>Signature Algorithm:</dt>
                                <dd id="cert-sig-alg"></dd>
                            </dl>
                        </div>

                        <div class="info-section">
                            <h3>Issuer</h3>
                            <dl id="cert-issuer"></dl>
                        </div>

                        <div class="info-section">
                            <h3>Subject</h3>
                            <dl id="cert-subject"></dl>
                        </div>

                        <div class="info-section">
                            <h3>Validity Period</h3>
                            <dl>
                                <dt>Not Before:</dt>
                                <dd id="cert-not-before"></dd>

                                <dt>Not After:</dt>
                                <dd id="cert-not-after"></dd>

                                <dt>Days Remaining:</dt>
                                <dd id="cert-days-remaining"></dd>

                                <dt>Status:</dt>
                                <dd id="cert-validity-status"></dd>
                            </dl>
                        </div>

                        <div class="info-section">
                            <h3>Public Key</h3>
                            <dl>
                                <dt>Algorithm:</dt>
                                <dd id="key-algorithm"></dd>

                                <dt>Size:</dt>
                                <dd id="key-size"></dd>

                                <dt>Exponent:</dt>
                                <dd id="key-exponent" class="mono"></dd>
                            </dl>
                        </div>

                        <div class="info-section">
                            <h3>Fingerprints</h3>
                            <dl>
                                <dt>SHA-1:</dt>
                                <dd id="fingerprint-sha1" class="mono"></dd>

                                <dt>SHA-256:</dt>
                                <dd id="fingerprint-sha256" class="mono"></dd>
                            </dl>
                        </div>

                        <div class="info-section full-width" id="sans-section" style="display: none;">
                            <h3>Subject Alternative Names</h3>
                            <ul id="cert-sans" class="tag-list"></ul>
                        </div>

                        <div class="info-section full-width" id="extensions-section" style="display: none;">
                            <h3>Extensions</h3>
                            <div id="cert-extensions"></div>
                        </div>
                    </div>

                    <div class="cert-pem-container">
                        <h3>Certificate PEM</h3>
                        <textarea id="cert-pem" readonly></textarea>
                        <button type="button" class="btn btn-small" id="copy-pem">Copy to Clipboard</button>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-primary" id="view-another">View Another Certificate</button>
                        <a href="/" class="btn">Back to Home</a>
                    </div>
                </div>

                <div id="error-container" style="display: none;">
                    <div class="alert alert-error">
                        <h3>‚úó Error</h3>
                        <p id="error-message"></p>
                    </div>
                    <button type="button" class="btn" id="try-again">Try Again</button>
                </div>
            </div>
        </main>

        <footer>
            <p>Flux SSL Manager - Secure Certificate Management</p>
        </footer>
    </div>

    <script src="/static/js/cert-info.js"></script>
</body>
</html>
